<!DOCTYPE html>
<html>
    <head>
        <!--p5 core library CDN-->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.14/p5.min.js"></script>

        <script>

            var quantity = 10;
            var paddleColor;
            var score = 0;
            var pongBalls = [];
            
            // p5 calls setup() exactly once when the canvas loads
            function setup() {
                createCanvas(500, 500);
                rectMode(CENTER);
                for (var i=0; i<quantity; i++) {
                    pongBalls.push(new PongBall(random(width),random(height)));
                }
                
                // paddle color
                paddleColor = color(255, 255, 0);
                
             }
             
            function draw() {
                background('lightgray');
                fill('black');
                
                for (var i=0; i<quantity; i++)
                    pongBalls[i].update();
                }
                
                fill(paddleColor);
                rect(mouseX, height - 30, width / 6, 10, 5);
                fill('black');
                text(score, mouseX, height-25);

            function PongBall(myX, myY) {
                // we went from 1 pong ball to n balls within arrays - 'this' will encapsulate it
                this.x = myX;
                this.y = myY;
                this.xSpeed = random(-2.5,2.5);
                this.ySpeed = random(-2.5,2.5);
                
                this.update = function() {
                    // position update
                    this.x[i] = this.x[i] + this.xSpeed[i];
                    this.y[i] = this.y[i] + this.ySpeed[i];
                    
                    // boundaries
                    // horizontal boundary
                    if (this.x[i] > width - 5 || this.x[i] < 5) {
                        this.xSpeed[i] = this.xSpeed[i] * -1; // xSpeed *= -1;
                    }
                    
                    // top boundary
                    if (this.y[i] + ySpeed < 5) {
                        this.ySpeed[i] = this.ySpeed[i] * -1; // xSpeed *= -1;
                    }
                    
                    // paddel boundary
                    if (this.y[i] >= height - 40 && abs(mouseX-x[i]) < width/12 && y[i] < height - 40 + this.ySpeed[i]) {
                        this.ySpeed[i] = this.ySpeed[i] * -1  // ySpeed *= -1;
                        // fun items
                        this.xSpeed[i] *= 1.2;
                        this.ySpeed[i] *= 1.2;
                        this.paddleColor = color(random(255), 0, 0);
                        this.score++;
                    }
                
                ellipse(this.x[i], this.y[i], 10, 10);
                
            }
            
        </script>
    </head>
    <body>

    </body>
</html>